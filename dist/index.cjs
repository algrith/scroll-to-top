var n=require("react");function e(){return e=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var t in r)({}).hasOwnProperty.call(r,t)&&(n[t]=r[t])}return n},e.apply(null,arguments)}var r={google:"https://speech.googleapis.com/v1/speech:recognize"};module.exports=function(t,o){var a=r[o.engine]+"?key="+t,i=n.useState({loading:!1,transcript:"",error:null}),c=i[1];return{transcribe:function(n){var r=new FileReader;r.onloadend=function(){if(r.result&&"string"==typeof r.result){c(function(n){return e({},n,{loading:!0})});var n=r.result.split(",")[1];fetch(a,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({config:{sampleRateHertz:48e3,encoding:"WEBM_OPUS",languageCode:"en-US"},audio:{content:n}})}).then(function(n){return n.json()}).then(function(n){console.log(n);var r=n.results.map(function(n){return n.alternatives[0].transcript}).join("\n");c(function(n){return e({},n,{loading:!1,error:null,transcript:r})})}).catch(function(n){console.error("Error performing speech-to-text:",n),c(function(r){return e({},r,{loading:!1,transcript:"",error:n})})})}},r.readAsDataURL(n)},response:i[0]}};
//# sourceMappingURL=index.cjs.map
