{"version":3,"file":"index.modern.js","sources":["../src/index.ts"],"sourcesContent":["import type { SpeechToTextEnginesURLs, TranscriberOptions, TranscriberResponse } from './types';\nimport { useState } from 'react';\n\nconst speechToTextEngineUrls: SpeechToTextEnginesURLs = {\n  google: `https://speech.googleapis.com/v1/speech:recognize`\n};\n\nconst useTranscriber = (apiKey: string, options: TranscriberOptions) => {\n  const engineUrl = `${speechToTextEngineUrls[options.engine]}?key=${apiKey}`;\n  const [response, setResponse] = useState<TranscriberResponse>({\n    loading: false,\n    transcript: '',\n    error: null\n  });\n\n  const transcribe = (audioBlob: Blob) => {\n    const reader = new FileReader();\n\n    reader.onloadend = () => {\n      if (!reader.result || typeof reader.result !== 'string') return;\n      setResponse((prev) => ({ ...prev, loading: true }));\n      const base64Data = reader.result.split(',')[1];\n      \n      fetch(engineUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify({\n          config: {\n            sampleRateHertz: 48000,\n            encoding: 'WEBM_OPUS',\n            languageCode: 'en-US'\n          },\n          audio: {\n            content: base64Data,\n          },\n        }),\n      })\n      .then((response) => response.json())\n      .then((data) => {\n        const transcript = data.results.map((result: Record<string, any>) => (\n          result.alternatives[0].transcript\n        )).join('\\n');\n\n        setResponse((prev) => ({\n          ...prev,\n          loading: false,\n          error: null,\n          transcript\n        }));\n      })\n      .catch((error) => {\n        console.error('Error performing speech-to-text:', error);\n        setResponse((prev) => ({\n          ...prev,\n          loading: false,\n          transcript: '',\n          error\n        }));\n      });\n    };\n\n    reader.readAsDataURL(audioBlob);\n  };\n\n  return {\n    transcribe,\n    response\n  };\n};\n\nexport default useTranscriber;"],"names":["speechToTextEngineUrls","google","useTranscriber","apiKey","options","engineUrl","engine","response","setResponse","useState","loading","transcript","error","transcribe","audioBlob","reader","FileReader","onloadend","result","prev","_extends","base64Data","split","fetch","method","headers","body","JSON","stringify","config","sampleRateHertz","encoding","languageCode","audio","content","then","json","data","results","map","alternatives","join","catch","console","readAsDataURL"],"mappings":"yPAGA,MAAMA,EAAkD,CACtDC,OAAQ,qDAGJC,EAAiBA,CAACC,EAAgBC,KACtC,MAAMC,EAAY,GAAGL,EAAuBI,EAAQE,eAAeH,KAC5DI,EAAUC,GAAeC,EAA8B,CAC5DC,SAAS,EACTC,WAAY,GACZC,MAAO,OAsDT,MAAO,CACLC,WApDkBC,IAClB,MAAMC,EAAS,IAAIC,WAEnBD,EAAOE,UAAY,KACjB,IAAKF,EAAOG,QAAmC,iBAAlBH,EAAOG,OAAqB,OACzDV,EAAaW,GAAIC,KAAWD,EAAI,CAAET,SAAS,KAC3C,MAAMW,EAAaN,EAAOG,OAAOI,MAAM,KAAK,GAE5CC,MAAMlB,EAAW,CACfmB,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAU,CACnBC,OAAQ,CACNC,gBAAiB,KACjBC,SAAU,YACVC,aAAc,SAEhBC,MAAO,CACLC,QAASb,OAIdc,KAAM5B,GAAaA,EAAS6B,QAC5BD,KAAME,IACL,MAAM1B,EAAa0B,EAAKC,QAAQC,IAAKrB,GACnCA,EAAOsB,aAAa,GAAG7B,YACtB8B,KAAK,MAERjC,EAAaW,GAAIC,EAAA,CAAA,EACZD,EAAI,CACPT,SAAS,EACTE,MAAO,KACPD,kBAGH+B,MAAO9B,IACN+B,QAAQ/B,MAAM,mCAAoCA,GAClDJ,EAAaW,GAAIC,EAAA,CAAA,EACZD,EAAI,CACPT,SAAS,EACTC,WAAY,GACZC,UACA,EACH,EAGHG,EAAO6B,cAAc9B,EACvB,EAIEP"}